{
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "width": 800,
      "height": 600,
      "title": {"text":"Recreational Facilities in City of Casey 2025", "fontSize":22},
      "projection": {"type": "mercator", "center": [145.3, -38.05], "scale": 66000},
      "layer": [
        {
          "data": {
            "url": "https://raw.githubusercontent.com/SinethWicky/fit3179_a2_sineth_wickramasinghe/refs/heads/main/data/casey.topojson",
            "format": { "type": "topojson", "feature": "LGA_2025_AUST_GDA2020" }
          },
          "transform": [{"filter": "datum.properties.LGA_NAME25 === 'Casey'"}],
          "mark": {"type": "geoshape", "fill": "#c8e6c9", "stroke": "black"}
        },
        {
          "data": {
            "url": "https://raw.githubusercontent.com/SinethWicky/fit3179_a2_sineth_wickramasinghe/refs/heads/main/data/casey_ovals.csv",
            "format": {"type": "csv"}
          },
          "transform": [
            {
              "calculate": "datum.parktype === '' || datum.parktype === 'Sport' ? 'Other' : datum.parktype",
              "as": "park_category"
            }
          ],
          "selection": {
            "highlight": {
              "type": "multi",
              "fields": ["park_category"],
              "bind": "legend"
            }
          },
          "mark": {"type": "circle", "opacity": 0.7, "stroke": "black", "strokeWidth": 1},
          "encoding": {
            "longitude": {"field": "longitude", "type": "quantitative"},
            "latitude": {"field": "latitude", "type": "quantitative"},
            "size": {"value": 150},
            "color": {
              "field": "park_category",
              "type": "nominal",
              "legend": {
                "title": "Park Type",
                "orient": "top-left",
                "direction": "vertical",
                "dx": 20,
                "dy": 60
              },
              "scale": {"scheme": "rainbow"}
            },
            "opacity": {
              "condition": {"selection": "highlight", "value": 1},
              "value": 0.2
            },
            "tooltip": [
              {"field": "name"},
              {"field": "park_category"},
              {"field": "postcode"}
            ]
          }
        }
      ]
    }
